function EFM_try_javascript_event () { var el = document.getElementById('echbay_fb_ms'); console.log(el.className); el.className += el.className ? ' someClass' : 'someClass'; } var EFM_current_window_scroll_y = 0, EFM_current_navigator_platform = navigator.platform || ''; try { if (typeof jQuery != 'function') { console.log('EchBay Facebook Messenger not start! jQuery function not found.'); if ( document.getElementById('fb-root').length == 0 ) { document.write( '<div id="fb-root"></div>' ); } /* document.getElementsByClassName('click-show-hide-box-chat').onclick = function () { EFM_try_javascript_event(); }; */ /* document.getElementsByClassName('click-show-hide-box-chat').addEventListener("click", function() { EFM_try_javascript_event(); }, false); */ } else { if (jQuery('#fb-root').length == 0) { jQuery('body').append('<div id="fb-root"></div>'); } jQuery('#echbay_fb_ms .fb-page').attr({ 'data-width' : Math.ceil( jQuery('#echbay_fb_ms').width() || 320 ) - 1 }); jQuery(".click-show-hide-box-chat").click(function() { if (EFM_current_navigator_platform == 'iPad' || EFM_current_navigator_platform == 'iPhone' || EFM_current_navigator_platform == 'iPod' || EFM_current_navigator_platform == 'Linux armv6l') { var a = jQuery('#echbay_fb_ms').attr('class') || ''; if ( a != '' && a.split('echbay-fbchat-active').length > 1 ) { window.scroll( 0, EFM_current_window_scroll_y ); } else { EFM_current_window_scroll_y = window.scrollY || jQuery(window).scrollTop() || 0; window.scroll( 0, jQuery(document).height() ); } } jQuery('#echbay_fb_ms').toggleClass('echbay-fbchat-active'); if ( typeof ga != 'undefined' ) { ga( 'send', 'event', 'Facebook Chat (' + document.domain + ')', 'Click', document.title ); } }); } } catch ( e ) { console.log( 'stack: ' + (e.stackTrace || e.stack) ); } /* * load facebook plugin if not exist * https://developers.facebook.com/docs/plugins/page-plugin */ (function(d, s, id) { if (d.getElementById(id)) return; var fb_app_id = EFM_custom_fb_app_id; if ( fb_app_id == '' && typeof __global_facebook_id != 'undefined' && __global_facebook_id != '' ) { fb_app_id = __global_facebook_id; } else if (typeof jQuery == 'function') { fb_app_id = jQuery('meta[property="fb:app_id"]').attr('content') || ''; } if ( fb_app_id == '' ) { fb_app_id = '650420091814299'; console.log( 'EchBay Facebook Messenger say: Auto load facebook app with ID: ' + fb_app_id + ' (not recommendations)' ); } var fb_src = (function() { var lang = ''; if (typeof jQuery == 'function') { lang = jQuery('html').attr('lang') || ''; } else { lang = document.getElementsByTagName("html")[0].getAttribute("lang") || ''; } if (lang == '') { lang = navigator.language || navigator.userLanguage || ''; } if (lang != '') { if (lang.split('_')[0].split('-')[0].toLowerCase() == 'vi') { return 'vi_VN'; } else { return lang.replace( '-', '_' ); } } return 'en_US'; })(); var js, fjs = d.getElementsByTagName(s)[0]; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/" + fb_src + "/sdk.js#xfbml=1&version=v2.9&appId=" + fb_app_id; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk')); 